# -*- mode: conf; -*-
# Sample minimal config file.  Copy this to ~/.offlineimaprc and edit to
# get started fast.

[general]
accounts = j@g
#, kuerzn

# You can specify one or more user interface modules for OfflineIMAP
# to use.  OfflineIMAP will try the first in the list, and if it
# fails, the second, and so forth.
#
# The pre-defined options are:
# Blinkenlights -- A fancy (terminal) interface
# TTYUI         -- a txt-based (terminal) interface
# Basic         -- Noninteractive interface suitable for cron'ing
# Quiet         -- Noninteractive interface, generates no output
#                  except for errors.
# MachineUI     -- Interactive interface suitable for machine
#                  parsing.
#
# You can override this with a command-line option -u.

#ui = Blinkenlights

[Account kuerzn]
localrepository = LocalKuerzn
remoterepository = RemoteKuerzn
status_backend = sqlite


[Repository LocalKuerzn]
type = Maildir
localfolders = ~/Mail/kuerzn

[Repository RemoteKuerzn]
type = Gmail
{{ pillar['gmail-kuerzn-credentials'] }}
# nametrans = lambda foldername: re.sub ('^\[gmail\]', 'bak',
#                                re.sub ('sent_mail', 'sent',
#                                re.sub ('starred', 'flagged',
#                                re.sub (' ', '_', foldername.lower()))))
folderfilter = lambda foldername: foldername not in ['[Google Mail]/All Mail']
# Necessary as of OfflineIMAP 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt

[Account j@g]
localrepository = Local
remoterepository = Remote
status_backend = sqlite

[Repository Local]
type = Maildir
localfolders = ~/Mail/j@g

[Repository Remote]
preauthtunnel = ssh -q strauss 'sudo -u vmail /usr/bin/imapd /var/jo/vmail/gerer.name/johannes'
nametrans = lambda foldername: re.sub('^INBOX\.', '', foldername)

#without the following would need corresponding reverse nametrans
# see http://docs.offlineimap.org/en/latest/nametrans.html
createfolders = False

maxconnections = 10
type = IMAP
#reference = INBOX (auskommentieren, sonst gibts die inbox nicht)
folderfilter = lambda foldername: foldername not in ['INBOX.Sent Items','INBOX.Deleted Items']

[mbnames]
enabled = yes
filename = ~/.mutt_mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"



