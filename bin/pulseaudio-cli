#!/bin/bash
INCREMENT=5

function get_sink_num
{
    SINK_NUM=$( pactl list short sinks | awk '{print $1}')
}

function get_mute_status
{
    ISMUTE=0
    if ( pactl list sinks | grep "Mute: yes" ) ; then
        ISMUTE=1
    fi
}

function toggle_mute
{
    get_mute_status
    get_sink_num
    declare -i NEWMUTE=$((1-$ISMUTE))
    pactl set-sink-mute $SINK_NUM $NEWMUTE
}

function  get_cur_vol
{
    CURVOL=$( pactl list sinks | awk '/Volume: 0:/ {print substr($3, 1, index($3, "%") - 1)}' )
}

case "$1" in
    increase)
				get_cur_vol
				get_sink_num
				if [ $CURVOL -lt 100 ]; then
            declare -i NEWVOL=$(($CURVOL+$INCREMENT))
            pactl set-sink-volume $SINK_NUM ${NEWVOL}"%"
				fi
        ;;
    decrease)
				get_cur_vol
        get_sink_num
				echo $CURVOL
				echo $INCREMENT
        declare -i NEWVOL=$(($CURVOL-$INCREMENT))
        pactl set-sink-volume $SINK_NUM ${NEWVOL}"%"
        ;;
    toggle)
				toggle_mute
        ;;
    *)
				echo "Usage: /usr/local/bin/pavolctl {increase|decrease|toggle}"
        exit 2
        ;;
esac
exit 0
